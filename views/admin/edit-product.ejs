<%- include('../includes/head.ejs')%>
    <link rel="stylesheet" href="/css/forms.css" />
    <link rel="stylesheet" href="/css/auth.css" />
  </head>
  <body>
    <%- include('../includes/nav.ejs') %>
    <main>
      <% if(errorMessage) { %> 
        <div class="user-message user-message--error"><%= errorMessage %> </div>
        <% } %> 
      <form class="login-form" action="/admin/<% if(editing || hasError) { %>edit-product<% } else { %>add-product<% } %>"method="POST">
        <div class="form-control">
          <label for="title">Title</label>
          <input
            class="<%= validationErrors.find(e => e.param === 'title') ? 'invalid' : '' %>"
            type="text"
            name="title"
            id="title"
            value="<% if(editing|| hasError) { %><%= product.title %> <% } %> "
             />
          <label for="imageUrl">Image Url</label>
          <input
            class="<%= validationErrors.find(e => e.param === 'imageUrl') ? 'invalid' : '' %>"
            type="text"
            name="imageUrl"
            id="imageUrl"
            value="<% if(editing|| hasError) { %><%= product.imageUrl %><% } %>"
            />
          <label for="price">price</label>
          <input
            class="<%= validationErrors.find(e => e.param === 'price') ? 'invalid' : '' %>"
            type="number"
            name="price"
            id="price"
            value="<% if(editing|| hasError) { %><%= product.price %><% } %>"
            />
          <label for="description">description</label>
          <textarea
            class="<%= validationErrors.find(e => e.param === 'description') ? 'invalid' : '' %>"
            name="description"
            id="description">
            <% if(editing|| hasError) { %><%= product.description %><% } %>
        </textarea>
        </div>
        <% if (editing|| hasError) { %>
            <input type="hidden" name="productId" value="<%= product._id %>">
            <% } %>  
          <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        <button type="submit">
            <% if (editing) { %> 
            Update Product
                <% } else { %> 
                    Add Product
            <% } %> 
        </button>
      </form>
    </main>
<%- include('../includes/end.ejs') %>
